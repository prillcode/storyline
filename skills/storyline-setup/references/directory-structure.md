# Directory Structure Reference

## Overview

The `.storyline/` directory contains all Storyline artifacts. It keeps your project organized and provides clear traceability from PRD to code.

**Note:** Storyline v2.1+ uses `.storyline/` as the primary directory. Projects using `.workflow/` (v2.0) are still fully supported for backward compatibility. All documentation examples use `.storyline/` but can be replaced with `.workflow/` for legacy projects.

## Complete Structure

```
project-root/
├── .workflow/
│   ├── README.md                        # Quick reference guide
│   ├── PRD-{identifier}.md              # Product requirements documents
│   ├── epics/
│   │   ├── epic-{identifier}-01-{slug}.md
│   │   ├── epic-{identifier}-02-{slug}.md
│   │   └── INDEX.md                     # Optional epic index
│   ├── stories/
│   │   ├── epic-{identifier}-01/        # Stories grouped by epic
│   │   │   ├── story-01.md
│   │   │   ├── story-02.md
│   │   │   └── story-03.md
│   │   └── epic-{identifier}-02/
│   │       └── story-01.md
│   ├── specs/
│   │   ├── epic-{identifier}-01/        # Specs grouped by epic
│   │   │   ├── spec-01.md
│   │   │   ├── spec-02.md
│   │   │   └── spec-stories-03-04-combined.md
│   │   └── epic-{identifier}-02/
│   │       └── spec-01.md
│   └── .planning/                       # Auto-generated by create-plans
│       ├── {identifier}-01-spec-01/
│       │   ├── PLAN.md
│       │   └── SUMMARY.md
│       └── {identifier}-02-spec-01/
│           ├── PLAN.md
│           └── SUMMARY.md
└── src/                                 # Your actual code
```

## Directory Breakdown

### `.storyline/` (Root)

**Purpose:** Contains all Storyline work artifacts separate from code.

**Why separate?**
- Keeps code directory clean
- Easy to .gitignore if desired
- Clear separation between planning and implementation

**Contains:**
- PRD files (one per initiative)
- Subdirectories for epics, stories, specs, plans

### `epics/`

**Purpose:** Contains epic files that break down PRDs into major themes.

**Naming convention:**
- With identifier: `epic-mco-1234-01-authentication.md`
- Without identifier: `epic-001-authentication.md`

**Structure:**
- `{identifier}`: Tracking code (e.g., `mco-1234`)
- `{nn}`: Sequential number (01, 02, 03...)
- `{slug}`: Human-readable name (kebab-case)

**Example:**
```
epics/
├── epic-mco-1234-01-user-auth.md
├── epic-mco-1234-02-task-management.md
├── epic-mco-1234-03-notifications.md
└── epic-feature-789-01-export.md      # Different initiative
```

**Flat structure:** All epics in one directory, regardless of initiative.

### `stories/`

**Purpose:** Contains user stories grouped by epic.

**Organization:** Epic-based subdirectories (NEW in v2.0)

**Directory naming:**
- With identifier: `epic-mco-1234-01/`
- Without identifier: `epic-001/`

**File naming within epic directory:**
- Simple sequential: `story-01.md`, `story-02.md`, `story-03.md`
- No identifier needed in filename (directory provides context)

**Example:**
```
stories/
├── epic-mco-1234-01/          # Auth epic
│   ├── story-01.md            # User signup
│   ├── story-02.md            # User login
│   └── story-03.md            # Password reset
├── epic-mco-1234-02/          # Tasks epic
│   ├── story-01.md            # Create task
│   └── story-02.md            # Edit task
└── epic-feature-789-01/       # Different initiative
    └── story-01.md            # Export data
```

**Why epic subdirectories?**
- Keep related stories together
- Scale to large projects with multiple initiatives
- Clear parent-child relationship
- Easy to find all stories for an epic

### `specs/`

**Purpose:** Contains technical specifications ready for implementation.

**Organization:** Epic-based subdirectories (same as stories)

**Directory naming:**
- With identifier: `epic-mco-1234-01/`
- Without identifier: `epic-001/`

**File naming strategies:**

1. **Simple (1 story → 1 spec):**
   ```
   spec-01.md      # From story-01
   spec-02.md      # From story-02
   ```

2. **Complex (1 story → multiple specs):**
   ```
   spec-story02-01.md    # Story 2, part 1
   spec-story02-02.md    # Story 2, part 2
   spec-story02-03.md    # Story 2, part 3
   ```

3. **Combined (multiple stories → 1 spec):**
   ```
   spec-stories-03-04-combined.md    # Stories 3+4 together
   spec-stories-05-06-07-combined.md # Stories 5+6+7 together
   ```

**Example:**
```
specs/
├── epic-mco-1234-01/
│   ├── spec-01.md                       # Simple: story 1
│   ├── spec-story02-01.md               # Complex: story 2, part 1
│   ├── spec-story02-02.md               # Complex: story 2, part 2
│   └── spec-stories-03-04-combined.md   # Combined: stories 3+4
└── epic-mco-1234-02/
    └── spec-01.md
```

**Why multiple strategies?**
- Flexibility for different story sizes
- Right-size specs for implementation
- Combine trivial stories, split complex ones

### `.planning/`

**Purpose:** Auto-generated execution plans and summaries.

**Organization:** Created automatically by `create-plans` skill.

**Directory naming:**
- Based on spec being implemented
- Format: `{identifier}-{epic-num}-spec-{spec-id}/`

**Contains:**
- `PLAN.md` - Execution plan (created by create-plans)
- `SUMMARY.md` - Implementation summary (created after execution)

**Example:**
```
.planning/
├── mco-1234-01-spec-01/
│   ├── PLAN.md
│   └── SUMMARY.md
├── mco-1234-01-spec-02/
│   ├── PLAN.md
│   └── SUMMARY.md
└── feature-789-01-spec-01/
    └── PLAN.md
```

**Note:** Usually gitignore this directory (plans are temporary).

## File Naming Patterns

### PRDs

**With identifier:**
```
PRD-mco-1234.md
PRD-feature-789.md
PRD-proj-abc.md
```

**Without identifier:**
```
PRD-001.md
PRD-002.md
PRD-003.md
```

**Identifier rules:**
- Alphanumeric + hyphens + underscores only
- Case preserved as entered
- Validation: `^[a-zA-Z0-9_-]+$`

### Epics

**Pattern:** `epic-{identifier}-{nn}-{slug}.md`

**Examples:**
```
epic-mco-1234-01-user-authentication.md
epic-mco-1234-02-task-management.md
epic-feature-789-01-data-export.md
epic-001-simple-feature.md                # No identifier
```

### Stories

**Pattern:** `epic-{identifier}-{nn}/story-{nn}.md`

**Examples:**
```
epic-mco-1234-01/story-01.md
epic-mco-1234-01/story-02.md
epic-001/story-01.md                      # No identifier
```

### Specs

**Simple pattern:** `spec-{nn}.md`
```
spec-01.md
spec-02.md
```

**Complex pattern:** `spec-story{nn}-{nn}.md`
```
spec-story02-01.md
spec-story02-02.md
```

**Combined pattern:** `spec-stories-{nn}-{nn}-combined.md`
```
spec-stories-03-04-combined.md
spec-stories-05-06-07-combined.md
```

## Traceability

Every file links back to its parent through:

1. **Filename patterns** (identifier propagation)
2. **Frontmatter** (parent references)
3. **Relative paths** (directory structure)

**Example chain:**
```
PRD-mco-1234.md
└─ epic-mco-1234-01-auth.md
   └─ stories/epic-mco-1234-01/story-01.md
      └─ specs/epic-mco-1234-01/spec-01.md
         └─ .planning/mco-1234-01-spec-01/PLAN.md
            └─ Code commits
               └─ .planning/mco-1234-01-spec-01/SUMMARY.md
```

## Version History & Compatibility

### v2.1 Change: `.workflow/` → `.storyline/`

Storyline v2.1 renamed the root directory from `.workflow/` to `.storyline/` for better branding. All skills now check `.storyline/` first, then fall back to `.workflow/` for backward compatibility.

**Migration is optional but recommended.** Run `/sl-setup` for interactive migration (takes seconds, preserves all work).

### v1 → v2 Changes

**v1.x structure (flat):**
```
.workflow/
├── epics/
│   ├── epic-001-auth.md
│   └── epic-002-tasks.md
├── stories/
│   ├── story-001-signup.md     # Flat, no subdirectories
│   └── story-002-login.md
└── specs/
    ├── spec-001-signup.md      # Flat, no subdirectories
    └── spec-002-login.md
```

**v2.0 structure (epic subdirectories):**
```
.workflow/
├── PRD-mco-1234.md             # NEW: PRD files
├── epics/
│   ├── epic-mco-1234-01-auth.md
│   └── epic-mco-1234-02-tasks.md
├── stories/
│   ├── epic-mco-1234-01/       # NEW: Epic subdirectories
│   │   ├── story-01.md
│   │   └── story-02.md
│   └── epic-mco-1234-02/
│       └── story-01.md
└── specs/
    ├── epic-mco-1234-01/       # NEW: Epic subdirectories
    │   ├── spec-01.md
    │   └── spec-02.md
    └── epic-mco-1234-02/
        └── spec-01.md
```

**Both work!** v2.0 skills support both structures.

## Multi-Initiative Projects

A single project can have multiple PRDs with different identifiers:

```
.workflow/
├── PRD-mco-1234.md             # First initiative
├── PRD-feature-789.md          # Second initiative
├── PRD-bugfix-456.md           # Third initiative
├── epics/
│   ├── epic-mco-1234-01-auth.md
│   ├── epic-mco-1234-02-tasks.md
│   ├── epic-feature-789-01-export.md
│   └── epic-bugfix-456-01-performance.md
├── stories/
│   ├── epic-mco-1234-01/
│   ├── epic-mco-1234-02/
│   ├── epic-feature-789-01/
│   └── epic-bugfix-456-01/
└── specs/
    ├── epic-mco-1234-01/
    ├── epic-mco-1234-02/
    ├── epic-feature-789-01/
    └── epic-bugfix-456-01/
```

Identifiers keep everything organized!

## Best Practices

**Use identifiers for tracking:**
If you use JIRA, Linear, or similar tools, use ticket IDs as identifiers.

**One PRD per major initiative:**
Don't try to fit everything in one PRD. Create multiple PRDs over time.

**Keep epic subdirectories:**
Even if you have one epic, use subdirectories. It scales better.

**Don't gitignore .workflow/:**
These files ARE your project documentation. Commit them.

**DO gitignore .planning/:**
Plans are temporary. The specs are the source of truth.

**Consistent naming:**
Follow the patterns. Don't create `my-story.md` or `new_spec.md`.
